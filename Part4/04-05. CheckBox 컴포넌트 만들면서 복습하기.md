# ğŸ¯ 04-05. CheckBox ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ë©´ì„œ ë³µìŠµí•˜ê¸°

## ğŸŒ 01. CheckBox ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

input ì—˜ë¦¬ë¨¼íŠ¸ì˜ checkbox íƒ€ì…ì„ ì¶œë ¥í•˜ëŠ” ì…ë ¥ ì»´í¬ë„ŒíŠ¸

```jsx
// ./src/04/CheckBox.jsx
import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import withStyles, { css } from './withStyles';

class CheckBox extends PureComponent {
  constructor(props) {
    super(props);
    this.setRef = this.setRef.bind(this); // 1
    this.handleClick = this.handleClick.bind(this); // 2
  }
  componentDidMount() {
    if (this.props.autoFocus) { // 3
      this.ref.focus();
    }
  }
  handleClick(e) {
    const { name, onChange } = this.props;
    onChange(name, e.target.checked); // 4
  }
  setRef(ref) {
    this.ref = ref;
  }
  render() {
    const {
      errorMessage,
      label,
      children,
      styles,
      checked,
    } = this.props;
    return (
      <label>
        {label}
        <div>
          <input
            ref={this.setRef}
            type="checkbox" 
            checked={checked && 'checked'} // 5
            onClick={this.handleClick} // 6
          />
          {children}
        </div>
        {errorMessage && (
          <div>
            <span {...css(styles.errorText)}>{errorMessage}</span>
          </div>
        )}
      </label>
    );
  }
}

CheckBox.propTypes = {
  name: PropTypes.string.isRequired,
  autoFocus: PropTypes.bool,
  checked: PropTypes.bool,
  onChange: PropTypes.func,
};
CheckBox.defaultProps = {
  autoFocus: false,
  checked: false,
  onChange: () => {},
};

export default withStyles(({ color, size }) => ({
  errorText: {
    fontSize: size.sm,
    color: color.error,
  },
}))(CheckBox);
```

1, 2 :  ì½œë°±í•¨ìˆ˜(setRef, handleClick)ì•ˆì— this ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ bind() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ thisì˜ ë²”ìœ„ê°€ CheckBox ì»´í¬ë„ŒíŠ¸ì˜ ê°ì²´ë¡œ ì •ì˜í•˜ë„ë¡ í•¨.

3 : autoFocusë¡œ ìë™ìœ¼ë¡œ ì»¤ì„œë°°ì¹˜

4 : onChangeí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì²« ì¸ìëŠ” nameí”„ë¡œí¼í‹°ë¥¼ ì „ë‹¬í•˜ê³ , ë‘ë²ˆì§¸ëŠ” checked ê°’ì„ ì „ë‹¬

5 : checkedê°€ trueì¸ ê²½ìš° checked

6 : input ì—˜ë¦¬ë¨¼íŠ¸ í´ë¦­ ì‹œ onChangeí•¨ìˆ˜ í˜¸ì¶œ



## ğŸŒ 02. ìŠ¤í† ë¦¬ ì‘ì„±

ê¸°ë³¸ ì¶œë ¥í™”ë©´, ë¼ë²¨, ì˜¤ë¥˜ë©”ì‹œì§€ ì¶œë ¥í™”ë©´, onChange, autoFocus ì´ë²¤íŠ¸ ì˜ˆì œ

```jsx
// ./src/stories/CheckBoxstory.jsx
import React from 'react';
import { storiesOf } from '@storybook/react';
import { action } from '@storybook/addon-actions';

import CheckBox from '../04/CheckBox';
import Text from '../04/Text';

storiesOf('CheckBox', module)
  .addWithJSX('ê¸°ë³¸ ì„¤ì •', () => <CheckBox name="agree" />)
  .addWithJSX('children ì˜ˆì œ', () => (
    <CheckBox name="agree">
      <Text>ë™ì˜í•©ë‹ˆë‹¤</Text>
    </CheckBox>
  ))
  .addWithJSX('label ì˜ˆì œ', () => (
    <CheckBox name="agree" label="ì´ë¦„">
      <Text>ë™ì˜í•©ë‹ˆë‹¤</Text>
    </CheckBox>
  ))
  .addWithJSX('onChange ì˜ˆì œ', () => (
    <CheckBox name="agree" onChange={action('onChange ì´ë²¤íŠ¸ ë°œìƒ')}>
      <Text>ë™ì˜í•©ë‹ˆë‹¤</Text>
    </CheckBox>
  ))
  .addWithJSX('checked ì˜ˆì œ', () => (
    <CheckBox name="agree" label="ì´ë¦„" checked>
      <Text>ë™ì˜í•©ë‹ˆë‹¤</Text>
    </CheckBox>
  ))
  .addWithJSX('errorMessage ì˜ˆì œ', () => (
    <CheckBox name="agree" label="ì´ë¦„" errorMessage="ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤">
      <Text>ë™ì˜í•©ë‹ˆë‹¤</Text>
    </CheckBox>
  ))
  .addWithJSX('autoFocus ì˜ˆì œ', () => (
    <CheckBox name="agree" label="ì´ë¦„" autoFocus>
      <Text>ë™ì˜í•©ë‹ˆë‹¤</Text>
    </CheckBox>
  ));
```



## ğŸŒ 03. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥ê³¼ ì´ë²¤íŠ¸ ì½œë°± í•¨ìˆ˜ í˜¸ì¶œì„ ê²€ì¦

```jsx
// ./src/tests/04/CheckBox_spec.jsx
import React from 'react';
import { shallow } from 'enzyme'; 

import CheckBox from '../../04/CheckBox';

describe('<CheckBox>', () => { // 1
  it('renders without crashing', () => {
    expect(() => {
      shallow(<CheckBox name="required">í…ŒìŠ¤íŠ¸</CheckBox>);
    }).not.toThrow();
  });

  it('displays errorMessage', () => {
    const errorMessage = 'ì˜¤ë¥˜ ë©”ì‹œì§€';
    const errorHtml = shallow(<CheckBox name="name" errorMessage={errorMessage}>í…ŒìŠ¤íŠ¸</CheckBox>)
      .dive()
      .find('span')
      .html(); // 2
    expect(errorHtml).toContain(errorMessage); // 3
  });

  it('calls back onChange on input is clicked', () => {
    const changeStub = jest.fn(); // 4
    expect(changeStub).toHaveBeenCalledTimes(0);
    const input = shallow(<CheckBox name="test_name" onChange={changeStub}>í…ŒìŠ¤íŠ¸</CheckBox>)
      .dive()
      .find('input');
    expect(input).toHaveLength(1);
    input.simulate('click', { target: { checked: true } }); // 5
    expect(changeStub).toHaveBeenCalledTimes(1); // 6
    expect(changeStub).toHaveBeenCalledWith('test_name', true); // 7
    input.simulate('click', { target: { checked: false } });
    expect(changeStub).toHaveBeenCalledWith('test_name', false); // 8
  });
});
```

1 : render()í•¨ìˆ˜ì˜ ì˜¤ë¥˜ ë°œìƒ ì—¬ë¶€ë¥¼ ê²€ì¦

2 : enzymeì˜ html()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì¶œë ¥ëœ HTMLì„ ë¬¸ìì—´ë¡œ ë°˜í™˜

3 : expect()í•¨ìˆ˜ê°€ ë°˜í™˜í•œ toContain()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ HTMLì— ì˜¤ë¥˜ë©”ì‹œì§€ê°€ í¬í•¨ë˜ì—ˆë‚˜ ê²€ì¦.

4 : jestì˜ fn()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì½œë°± í•¨ìˆ˜ ê²€ì¦ì„ ìœ„í•œ ê°ì‹œ í•¨ìˆ˜ë¥¼ ìƒì„±

5 : enzymeì˜ ì´ë²¤íŠ¸ ì¬í˜„ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ inputê°’ì´ ë³€ê²½ë˜ëŠ” ì´ë²¤íŠ¸(onChange)ë¥¼ ì¬í˜„

6,7,8 ; fn()í•¨ìˆ˜ë¡œ ë°˜í™˜ëœ ì½œë°± í•¨ìˆ˜ì˜ í˜¸ì¶œ íšŸìˆ˜ì™€ ì¸ìë“¤ì„ ê²€ì‚¬í•¨