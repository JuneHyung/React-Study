# ğŸ¯ 03-06. í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸

í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ë‘ ì¢…ë¥˜ì˜ í´ë˜ìŠ¤(Component, PureComponent)ë¥¼ ì‚¬ìš©í•œë‹¤.<br/>ë‘ í´ë˜ìŠ¤ì˜ ì°¨ì´ì ê³¼ ì¥ë‹¨ì ì„ ì•Œì•„ë³´ì.

## ğŸŒ Component

**í”„ë¡œí¼í‹°, stateì™€ ìƒëª…ì£¼ê¸° í•¨ìˆ˜ê°€ ë“¤ì–´ìˆëŠ” êµ¬ì¡°ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©**

```jsx
import React from 'react';
class MyComponent extends React.Component{
    constructor(props){
        super(props);
        console.log('ìƒì„±í•¨ìˆ˜');
    }
    componentDidMount(){ /* ìƒì†ë°›ì€ ìƒëª…ì£¼ê¸° í•¨ìˆ˜ */ }
    myMethod(){ /* ì¶”ê°€ í™•ì¥ í•¨ìˆ˜ */ }
	render(){ /* ìƒì†ë°›ì€ í™”ë©´ ì¶œë ¥ í•¨ìˆ˜*/ }
}
export default MyComponent;
```



## ğŸŒ PureComponent

Componentí´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤.

shouldComponentUpdate()í•¨ìˆ˜ë¥¼ 'ì–•ì€ ë¹„êµ'ë¥¼ í•˜ë„ë¡ ì¬ì •ì˜í•¨.<br/>**PureComponent**ë¡œ ë§Œë“¤ì–´ì§„ ì»´í¬ë„ŒíŠ¸ëŠ” **'ì–•ì€ ë¹„êµë¥¼ í†µí•´ ë°ì´í„°ê°€ ë³€ê²½ëœ ê²½ìš°'ì—ë§Œ render()í•¨ìˆ˜ë¥¼ í˜¸ì¶œ**í•¨.<br/>**Component**ë¡œ ë§Œë“¤ì–´ì§„ ì»´í¬ë„ŒíŠ¸ëŠ” **í•­ìƒ render()í•¨ìˆ˜ë¥¼ í˜¸ì¶œ**í•¨.

```jsx
import React from 'react';
import shallowEqual from 'shallow-equal';
export class PureComponent extends React.Component{
    shouldComponentUpdate(nextProps, nextState){
        return !shallowEqual(this.props, nextProps) || 
            !shallowEqual(this.state, nextState)
    }
}

export default PureComponent;
```

shallow-equalë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ shallowEqual()í•¨ìˆ˜ë¥¼ í†µí•´ ì–•ì€ ë¹„êµë¥¼ í•¨.<br/>í˜„ì¬ í”„ë¡œí¼í‹°,stateë¥¼ ê°±ì‹ í•œ í”„ë¡œí¼í‹°, state ì™€ ì–•ì€ ë¹„êµë¥¼ í•˜ê³ ìˆìŒ.



### ğŸ‘‰ ì–•ì€ ë¹„êµ

ê²€ì¦ë¹„êµë¥¼ ìœ„í•´ ì–•ì€ë¹„êµë¥¼ ì•Œì•„ë³´ì.

==, ===, shallowEqual ë¹„êµ

```jsx
import shallowEqual from 'shallow-equal';

const obj = { name :'park'};
const mylist = [1, 2, 3, obj];
const list1 = [1, 2, 3, obj];
const list2 = [1, 2, 3, {name: 'park'}];
```



#### ===

===ì€ ê¹Šì€ ë¹„êµë¥¼ í•œë‹¤.

```text
mylist === list1 // false
```

mylistì™€ list1ì€ ê°™ì€ ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ ê°ê° ìƒˆë¡­ê²Œ ì •ì˜ëœ ë°°ì—´ì´ë¼ falseì„.

ë°°ì—´ìš”ì†Œ í•˜ë‚˜í•˜ë‚˜ë¥¼ ëª¨ë‘ ë¹„êµí•  ìˆ˜ëŠ” ì—†ê¸°ë•Œë¬¸ì— ì–•ì€ ë¹„êµë¥¼ í•œë‹¤.

#### shallowEqual

```text
shallowEqual(mylist, list1) // true
```

```text
shallowEqual(list1, list2) // false
```

list1ê³¼ list2ëŠ” falseê°€ ë‚˜ì˜¨ë‹¤.

list2ì˜ ë§ˆì§€ë§‰ ìš”ì†ŒëŠ” objì™€ ê°™ì€ ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆì§€ë§Œ ìƒˆë¡œìš´ ê°ì²´ì´ê¸° ë•Œë¬¸.

---

ë‚´ìš©ë¬¼ì„ ëª¨ë‘ ë¹„êµí•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë¹„êµ ê²€ì‚¬ ì‘ì—…ì´ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¼ì¹˜ê¸° ë•Œë¬¸.

PureComponentí´ë˜ìŠ¤ë¡œ ì„ ì–¸í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” shouldComponentUpdate()í•¨ìˆ˜ì—ì„œ shallowEqual()í•¨ìˆ˜ë¡œ ì–•ì€ ë¹„êµë¥¼ í•˜ì—¬ ë°ì´í„°ì˜ ë³€ê²½ì´ ìˆìœ¼ë©´ í™”ë©´ì„ ìƒˆë¡œ ì¶œë ¥í•¨.

Componentí´ë˜ìŠ¤ë¡œ ì„ ì–¸í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ì´ëŸ° ë¹„êµê³¼ì • ì—†ì´ í•­ìƒ ìƒˆë¡œ ì¶œë ¥ í•œë‹¤.



### ğŸ‘‰ PureComponentì™€ ë¶ˆë³€ ë³€ìˆ˜ë¡œ ì„±ëŠ¥ì„ ë†’ì¸ë‹¤.

ì•±ì˜ ì„±ëŠ¥ì„ ìµœëŒ€í™”í•˜ê¸° ìœ„í•´ ë¶ˆë³€ë³€ìˆ˜ë„ ì‚¬ìš©í•œë‹¤. (07-03ì—ì„œ ë‹¤ë£° ì˜ˆì •)



## ğŸŒ ë¬¸ì œ

ë‹¤ìŒ Appì˜ ë²„íŠ¼ì´ í´ë¦­ëœ ì´í›„ ì¶œë ¥ë  ê²°ê³¼ê°’ì„ ì±„ì›Œ ì£¼ì„¸ìš”.

```jsx
import React from 'react';
class MyComponent extends React.Component{
    componentDidUpdate(){ console.log('MyComponent ìƒˆë¡œ ê³ ì¹¨'); }
}
class MyPureComponent extends React.PureComponent{
    componentDidUpdate(){ console.log('MyPureComponent ìƒˆë¡œ ê³ ì¹¨'); }
}

class App extends React.Component{
    constructor(props){
        super(props);
      this.listValue = [{ name: 'Park' }, {name: 'Lee'}];
        this.state = {version:0};
        this.handleClick = this.handleClick.bind(this);
    }
    handleClick(){
        setTimeout(()=>{
            this.listValue[0].name = 'Justin';
            this.setState({version: 1});
        }, 100);
        setTimeout(()=>{
            this.listValue = [{name: 'Jstin'}, {name: 'Lee'}];
            this.setState({version: 2});
        }, 200);
    }
    render(){
        return (
        	<div className="body">
				<MyComponent value={this.listValue} />
                <MyPureComponent value={this.listValue} />
                <button onClick={this.handleClick}>ë²„íŠ¼</button>
            </div>
        );
    }
}
```

ì •ë‹µ  ê²°ê³¼

```text
MyComponent ìƒˆë¡œ ê³ ì¹¨
MyComponent ìƒˆë¡œ ê³ ì¹¨
MyPureComponent ìƒˆë¡œ ê³ ì¹¨
```

